# Coffee Van - Система управління фургоном кави

## Опис проекту

**Coffee Van** - це JavaFX додаток для управління фургоном кави, який дозволяє керувати різними типами кави, відстежувати їх кількість, якість та об'єм. Додаток включає повноцінну систему збереження даних у базі даних, логування та тестування.

## Основні функції

### Управління фургоном
- Додавання та видалення кави з фургону
- Контроль максимальної місткості (5,000,000 мл)
- Відстеження поточного об'єму та загальної ваги
- Розрахунок середньої якості та загальної вартості

### Типи кави
Додаток підтримує 4 основні типи кави:
- **Зернова кава** (`BeanCoffee`)
- **Мелена кава** (`GroundCoffee`) 
- **Розчинна кава в банках** (`InstantJarCoffee`)
- **Розчинна кава в пакетиках** (`InstantPacketCoffee`)

### Функції аналітики
- Фільтрація кави за типом та якістю
- Сортування за різними критеріями
- Розрахунок співвідношення ціни до ваги
- Статистика по фургону

### Збереження даних
- Збереження фургонів у базі даних MySQL
- Завантаження збережених фургонів
- Управління історією фургонів
- Транзакційна безпека операцій

## Технологічний стек

### Основні технології
- **Java 17** - основна мова програмування
- **JavaFX 17** - графічний інтерфейс користувача
- **Maven** - управління залежностями та збірка
- **MySQL 8.0** - база даних для збереження даних

### Додаткові бібліотеки
- **Log4j2** - логування з підтримкою email-сповіщень
- **JUnit 5** - тестування
- **Mockito** - мокування для тестів
- **H2 Database** - тестова база даних
- **JaCoCo** - покриття коду тестами

## Встановлення та запуск

### Передумови
- Java 17 або новіша версія
- Maven 3.6+
- MySQL 8.0+ (для продакшн)
- JavaFX SDK 17 (якщо не використовується модульна система)

### Крок 1: Клонування репозиторію
```bash
git clone <repository-url>
cd coffee-van
```

### Крок 2: Налаштування бази даних
1. Створіть базу даних MySQL:
```sql
CREATE DATABASE coffee_van;
```

2. Налаштуйте підключення в `DatabaseConfig.java` або через системні властивості:
```bash
-Ddb.url=jdbc:mysql://localhost:3306/coffee_van
-Ddb.user=your_username
-Ddb.password=your_password
```

### Крок 3: Збірка та запуск
```bash
# Збірка проекту
mvn clean compile

# Запуск додатку
mvn javafx:run

# Або запуск з Maven
mvn clean javafx:run
```

### Крок 4: Запуск тестів
```bash
# Запуск всіх тестів
mvn test

# Запуск тестів з покриттям коду
mvn clean test jacoco:report
```

## Використання

### Основні операції
1. **Додавання кави**: Заповніть форму з інформацією про каву та натисніть "Додати"
2. **Редагування**: Виберіть каву в таблиці та натисніть "Редагувати"
3. **Видалення**: Виберіть каву та натисніть "Видалити"
4. **Фільтрація**: Використовуйте фільтри за типом та якістю
5. **Сортування**: Виберіть критерій сортування з випадаючого списку

### Збереження та завантаження
- **Зберегти фургон**: Натисніть "Зберегти" для збереження поточного стану
- **Завантажити фургон**: Використовуйте кнопку "Завантажити" для вибору збереженого фургону
- **Управління фургонами**: Перейдіть на сторінку управління для перегляду всіх збережених фургонів

## Логування

Додаток використовує Log4j2 для логування з наступними можливостями:
- **Консольне логування** - для розробки
- **Файлове логування** - з ротацією файлів (10MB, 10 файлів)
- **Email-сповіщення** - для критичних помилок

Логи зберігаються в папці `logs/` з форматом:
- `coffee-van.log` - поточний лог
- `coffee-van-YYYY-MM-DD-N.log` - архівні логи

## Тестування

Проект включає комплексне тестування:

### Типи тестів
- **Unit тести** - тестування окремих класів та методів
- **Integration тести** - тестування взаємодії з базою даних
- **Controller тести** - тестування JavaFX контролерів

### Покриття коду
Використовується JaCoCo для аналізу покриття коду. Звіти генеруються в `target/site/jacoco/`

### Запуск тестів
```bash
# Всі тести
mvn test

# Конкретний тест
mvn test -Dtest=VanTest

# Тести з покриттям
mvn clean test jacoco:report
```

## Конфігурація

### База даних
Налаштування підключення до БД через системні властивості:
- `db.url` - URL бази даних
- `db.user` - ім'я користувача
- `db.password` - пароль

### Логування
Конфігурація в `src/main/resources/log4j2.xml`:
- Рівень логування
- Формат повідомлень
- Email-налаштування для критичних помилок

## Автор

**Юрій Сташчишин**

---
